import{A as E,B as _,C as x,D as R,E as N,G as A,H as O,f as $,J as G,b as f,M as B,O as J,P as W,I as z,Q as X,R as Y,S as v,U as Z,V as F,W as K,X as ee,r as te,Y as se,Z as ne,_ as oe,N as ie,n as ae,u as le,e as ce,$ as re,o as b,c as w,a as u,q as g,z as L,a0 as M,k as q,p as ue,d as de}from"./index.54d239d6.js";import{l as fe,n as pe,_ as me}from"./notlike.13269c64.js";let k=0;function ge(e){e?(k||document.body.classList.add("van-toast--unclickable"),k++):k&&(k--,k||document.body.classList.remove("van-toast--unclickable"))}const[ke,y]=E("toast"),ye=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],ve={icon:String,show:Boolean,type:_("text"),overlay:Boolean,message:x,iconSize:x,duration:R(2e3),position:_("middle"),teleport:[String,Object],className:N,iconPrefix:String,transition:_("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:N,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var D=A({name:ke,props:ve,emits:["update:show"],setup(e,{emit:s}){let t,l=!1;const c=()=>{const o=e.show&&e.forbidClick;l!==o&&(l=o,ge(l))},d=o=>s("update:show",o),m=()=>{e.closeOnClick&&d(!1)},p=()=>clearTimeout(t),h=()=>{const{icon:o,type:r,iconSize:T,iconPrefix:U,loadingType:j}=e;if(o||r==="success"||r==="fail")return f(z,{name:o||r,size:T,class:y("icon"),classPrefix:U},null);if(r==="loading")return f(X,{class:y("loading"),size:T,type:j},null)},n=()=>{const{type:o,message:r}=e;if(Y(r)&&r!=="")return o==="html"?f("div",{key:0,class:y("text"),innerHTML:String(r)},null):f("div",{class:y("text")},[r])};return O(()=>[e.show,e.forbidClick],c),O(()=>[e.show,e.type,e.message,e.duration],()=>{p(),e.show&&e.duration>0&&(t=setTimeout(()=>{d(!1)},e.duration))}),$(c),G(c),()=>f(W,B({class:[y([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:m,onClosed:p,"onUpdate:show":d},J(e,ye)),{default:()=>[h(),n()]})}});const H={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let i=[],S=!1,C=v({},H);const I=new Map;function V(e){return K(e)?e:{message:e}}function he(){const{instance:e,unmount:s}=ee({setup(){const t=te(""),{open:l,state:c,close:d,toggle:m}=se(),p=()=>{S&&(i=i.filter(n=>n!==e),s())},h=()=>f(D,B(c,{onClosed:p,"onUpdate:show":m}),null);return O(t,n=>{c.message=n}),ne().render=h,{open:l,clear:d,message:t}}});return e}function Ce(){if(!i.length||S){const e=he();i.push(e)}return i[i.length-1]}function a(e={}){if(!Z)return{};const s=Ce(),t=V(e);return s.open(v({},C,I.get(t.type||C.type),t)),s}const P=e=>s=>a(v({type:e},V(s)));a.loading=P("loading");a.success=P("success");a.fail=P("fail");a.clear=e=>{var s;i.length&&(e?(i.forEach(t=>{t.clear()}),i=[]):S?(s=i.shift())==null||s.clear():i[0].clear())};function Ie(e,s){typeof e=="string"?I.set(e,s):v(C,e)}a.setDefaultOptions=Ie;a.resetDefaultOptions=e=>{typeof e=="string"?I.delete(e):(C=v({},H),I.clear())};a.allowMultiple=(e=!0)=>{S=e};a.install=e=>{e.use(F(D)),e.config.globalProperties.$toast=a};const Q=e=>(ue("data-v-4cf2529f"),e=e(),de(),e),Se={class:"question"},_e=["innerHTML"],be=["innerHTML"],we={key:0,class:"info"},Oe=["src"],Pe={class:"two"},Te=Q(()=>u("img",{src:me,alt:""},null,-1)),xe=Q(()=>u("div",{class:"deco"},null,-1)),Ne={__name:"Question",props:{id:{type:Number,required:!0},userId:{type:Number,required:!0},title:{type:String,required:!0},content:{type:String,default:""},time:{type:String,required:!0},likeCnt:{type:Number,required:!0},isLiked:{type:Boolean,required:!0},isPublished:{type:Boolean,required:!0}},emits:{like(e,s,t,l){return t.state.login?t.state.login:(ie({type:"warning",message:"\u672A\u767B\u5F55\uFF0C\u524D\u5F80\u767B\u5F55"}),l.push("/form/login"),!1)},ondelete(){return!0}},setup(e,{emit:s}){const t=e,l=ae(()=>t.isLiked?fe:pe),c=le(),d=ce(),m=re(),p=()=>{c.push({name:"ans",params:{postId:t.id}})};return(h,n)=>{const o=z;return b(),w("div",Se,[u("div",{class:"question-content",onClick:p},[u("h2",{class:"title",innerHTML:e.title},null,8,_e),u("p",{class:"q-desc",innerHTML:e.content},null,8,be)]),g(m).path.includes("/search-list/")?q("",!0):(b(),w("div",we,[u("div",null,[u("span",{class:"one",onClick:n[0]||(n[0]=()=>s("like",e.id,e.userId,g(d),g(c)))},[u("img",{src:g(l),alt:"\u56FE\u7247"},null,8,Oe),L(M(e.likeCnt),1)]),u("span",Pe,[Te,L(" "+M(e.time),1)])])])),xe,e.userId===g(d).state.userId?(b(),w("div",{key:1,class:"delete",onClick:n[1]||(n[1]=()=>s("ondelete",e.id))},[f(o,{name:"cross"})])):q("",!0)])}}},Be=oe(Ne,[["__scopeId","data-v-4cf2529f"]]);function ze(e,s){return e.map(t=>({likeCnt:t.likeCount,id:t.post.id,content:t.post.content,userId:t.post.userId,createTime:t.post.createTime.substr(0,11),title:t.post.title,isLiked:t.likeStatus!==0,isPublished:s.state.login&&s.state.userId===t.userId}))}export{Be as Q,a as T,ze as p};
