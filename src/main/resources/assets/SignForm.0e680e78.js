import{_ as f,u as h,m as v,o as w,c as y,a as s,b as r,F as V,p as b,d as S,a9 as z,N as i,aa as B,a8 as _,z as C}from"./index.54d239d6.js";/* empty css              */const a=n=>(b("data-v-6965e4b8"),n=n(),S(),n),F={class:"form"},k={class:"item"},x=a(()=>s("div",{class:"btn"},"\u7528\u6237\u540D",-1)),I={class:"field"},N=a(()=>s("div",{class:"deco"},null,-1)),$={class:"item"},A=a(()=>s("div",{class:"btn"},"\u5BC6\u7801",-1)),R={class:"field"},T=a(()=>s("div",{class:"deco"},null,-1)),Z=C(" \u6CE8\u518C "),M=a(()=>s("div",{class:"deco"},null,-1)),U=[Z,M],D={__name:"SignForm",setup(n){const d=h(),m=()=>d.push("/form/login"),e=v({username:"",password:""}),u=/^[a-zA-Z0-9]{6,20}$/,p=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,15}$/,g=async()=>{if(await z(),!u.test(e.username))return e.username="",i({type:"danger",message:"\u7528\u6237\u540D\u4E0D\u5408\u6CD5"});if(!p.test(e.password))return e.password="",i({type:"danger",message:"\u5BC6\u7801\u4E0D\u5408\u6CD5"});try{const o=await B(e.username,e.password);if(console.log("Sign in res ",o),o.code===200){_({message:"\u6CE8\u518C\u6210\u529F\uFF0C\u524D\u5F80\u767B\u5F55\u9875",showConfirmButton:!1});const t=setTimeout(()=>{_.close(),console.log("close"),d.replace("/form/login"),clearTimeout(t)},1e3)}else o.code===300&&o.data&&i({type:"danger",message:"\u7528\u6237\u540D\u5DF2\u5B58\u5728"})}catch(o){console.log(o),i({message:"Oops",showConfirmButton:!1})}finally{e.password="",e.username=""}};return(o,t)=>{const c=V;return w(),y("div",F,[s("div",k,[x,s("div",I,[r(c,{modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.username=l),modelModifiers:{trim:!0},placeholder:"6-20\u4F4D\u6570\u5B57\u548C\u5B57\u6BCD\u7EC4\u5408",size:"large"},null,8,["modelValue"])]),N]),s("div",$,[A,s("div",R,[r(c,{modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=l=>e.password=l),modelModifiers:{trim:!0},placeholder:"6-15\u4F4D\u6570\u5B57\u548C\u5B57\u6BCD\u7EC4\u5408",size:"large",type:"password"},null,8,["modelValue"])]),T]),s("div",{class:"item sign",onClick:g},U),s("button",{class:"go-btn",onClick:m},"\u767B\u5F55")])}}},O=f(D,[["__scopeId","data-v-6965e4b8"]]);export{O as default};
