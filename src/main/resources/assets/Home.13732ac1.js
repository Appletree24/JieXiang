import{_ as k,r as v,u as w,o as _,c as m,a as e,b as p,s as z,F as N,I,p as T,d as $,l as H,N as C,e as Q,f as F,g as S,h as L,i as P,j as f,k as U,m as W,n as K,w as h,T as M,q as y,t as O,L as j,v as A,K as D,P as G,x as R}from"./index.54d239d6.js";import{Q as J}from"./QHead.261cc03b.js";/* empty css              */import{T as x,p as E,Q as B}from"./index.5ba85944.js";/* empty css              */import"./notlike.13269c64.js";const X="/assets/poppic.15080bf8.png";const Y=a=>(T("data-v-e996f12a"),a=a(),$(),a),Z={class:"search"},q={class:"search-field"},ee=Y(()=>e("div",{class:"deco"},null,-1)),se={__name:"Search",setup(a){const o=v(""),s=w(),n=async()=>{await z(),o.value!==""&&s.push(`search-list/${o.value}`)};return(l,i)=>{const u=N,c=I;return _(),m("div",Z,[e("div",q,[p(u,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=t=>o.value=t),placeholder:l.$attrs.placeholder,size:"large"},null,8,["modelValue","placeholder"])]),e("div",{class:"search-btn",onClick:n},[p(c,{name:"search",size:"26px",style:{fontWeight:700}})]),ee])}}},te=k(se,[["__scopeId","data-v-e996f12a"]]);const oe={class:"tab"},ne={__name:"Qtab",emits:["toggle"],setup(a,{emit:o}){const s=v(null),n=v(null),l=i=>{i.target.classList.contains("active")||(s.value.classList.toggle("active"),n.value.classList.toggle("active"),o("toggle"))};return(i,u)=>(_(),m("div",oe,[e("div",{class:"curation",onClick:l,ref_key:"curationEl",ref:s},"\u7CBE\u9009",512),e("div",{class:"living active",onClick:l,ref_key:"liveEl",ref:n},"\u5B9E\u65F6",512)]))}},ie=k(ne,[["__scopeId","data-v-c87b7518"]]);async function V(a,o,s){try{const n=await H(a,1,a,o),l=s.find(i=>i.id===a);l.isLiked=!l.isLike,l.likeCnt=n.likeCount,console.log("toggle like",n),C({type:"success",message:n.likeStatus===0?"\u53D6\u6D88\u70B9\u8D5E\u6210\u529F":"\u70B9\u8D5E\u6210\u529F"})}catch(n){console.log(n),C({type:"danger",message:"Oops!\u5931\u8D25\u4E86"})}}const ae={key:0},le={__name:"CurationList",setup(a){const o=Q(),s=v([]),n=v(!0);F(async()=>{console.log("Mounted"),x.loading({message:"\u52A0\u8F7D\u4E2D...",forbidClick:!0,loadingType:"spinner"});try{const i=await S(1,0,void 0,o.state.login?o.state.token:void 0);console.log(i),s.value=E(i,o)}catch(i){console.log(i)}finally{const i=setTimeout(()=>{clearTimeout(i),n.value=!1,x.clear()},1e3)}});const l=(i,u)=>{V(i,u,s.value)};return(i,u)=>n.value?U("",!0):(_(),m("div",ae,[(_(!0),m(L,null,P(s.value,c=>(_(),f(B,{class:"question-item",title:c.title,content:c.content,time:c.createTime,likeCnt:c.likeCnt,key:c.id,id:c.id,userId:c.userId,isLiked:c.isLiked,isPublished:c.isPublished,onLike:l},null,8,["title","content","time","likeCnt","id","userId","isLiked","isPublished"]))),128))]))}},ce=k(le,[["__scopeId","data-v-9549246f"]]);const de={__name:"LiveList",setup(a){const o=Q(),s=W({list:[],offset:0,limit:5,postCnt:null}),n=v(!1),l=K(()=>s.postCnt&&s.offset>=s.postCnt),i=async()=>{try{const t=await S(0,s.offset,s.limit,o.state.login?o.state.token:"");s.postCnt=t[0]?t[0].postCount:null,s.offset+=t.length-1;const r=setTimeout(()=>{clearTimeout(r),s.list.push(...E(t,o)),n.value=!1},2e3)}catch(t){console.log(t)}},u=(t,r)=>{V(t,r,s.list)},c=async t=>{const r=await O(t);console.log("delete res",r),s.list=s.list.filter(g=>g.id!==t),C({type:"success",message:"\u5220\u9664\u6210\u529F"})};return(t,r)=>{const g=j;return _(),f(g,{loading:n.value,"onUpdate:loading":r[0]||(r[0]=d=>n.value=d),finished:y(l),"finished-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:i},{default:h(()=>[p(M,{name:"list"},{default:h(()=>[(_(!0),m(L,null,P(s.list,d=>(_(),f(B,{class:"question-item",title:d.title,content:d.content,time:d.createTime,likeCnt:d.likeCnt,key:d.id,id:d.id,userId:d.userId,isLiked:d.isLiked,isPublished:d.isPublished,onLike:u,onOndelete:c},null,8,["title","content","time","likeCnt","id","userId","isLiked","isPublished"]))),128))]),_:1})]),_:1},8,["loading","finished"])}}},re=k(de,[["__scopeId","data-v-1ee8e060"]]);const b=a=>(T("data-v-e1bddf55"),a=a(),$(),a),_e=b(()=>e("div",{class:"title"},"\u89E3\u6E58",-1)),ue={class:"right-icon"},pe={class:"person-icon"},ve={class:"search-wrap"},me={class:"tab-wrap"},ge={class:"questions-wrap"},he={class:"question-list"},fe={class:"pop"},ke={class:"top"},be=b(()=>e("h3",null,"\u66F4\u591A",-1)),ye={class:"buttons"},Ce={class:"message btn"},Le=b(()=>e("div",{class:"deco"},null,-1)),xe={class:"about btn"},we=b(()=>e("div",{class:"deco"},null,-1)),Ie=b(()=>e("div",{class:"bottom"},[e("img",{src:X,alt:"\u4E00\u5F20\u56FE\u7247"}),e("p",null,"\u53D1\u73B0\u66F4\u597D\u7684\u6E58\u5927")],-1)),Te={__name:"Home",setup(a){const o=w(),s=[ce,re],n=v(1),l=v(!1),i=()=>{n.value=n.value===0?1:0},u=async()=>{await R(),o.push("/ask-question")};return(c,t)=>{const r=I,g=G;return _(),m(L,null,[p(J,{class:"header"},{left:h(()=>[_e]),right:h(()=>[e("div",ue,[e("div",pe,[p(r,{name:"user-o",size:"18px",style:{fontWeight:700},onClick:t[0]||(t[0]=()=>y(o).push("/form/login"))})]),e("div",{class:"more-icon",onClick:t[1]||(t[1]=()=>l.value=!0)},[p(r,{name:"ellipsis",size:"18px",style:{fontWeight:700}})])])]),_:1}),e("div",ve,[p(te)]),e("div",me,[p(ie,{onToggle:i})]),e("div",ge,[e("main",he,[(_(),f(D,null,[(_(),f(A(s[n.value])))],1024))])]),p(g,{show:l.value,"onUpdate:show":t[4]||(t[4]=d=>l.value=d),position:"right",style:{"box-sizing":"border-box",height:"90vh",width:"158px",border:"1.7px solid #000000","border-right":"none","border-top-left-radius":"25px","border-bottom-left-radius":"25px","padding-top":"10px","padding-left":"12px"}},{default:h(()=>[e("div",fe,[e("div",ke,[be,e("div",ye,[e("div",Ce,[e("div",{class:"content",onClick:t[2]||(t[2]=()=>y(o).push("/message"))}," \u6D88\u606F "),Le]),e("div",xe,[e("div",{class:"content",onClick:t[3]||(t[3]=()=>y(o).push("/about"))}," \u5173\u4E8E\u6211\u4EEC "),we])])]),Ie])]),_:1},8,["show"]),e("button",{class:"add-q",onClick:u},"?")],64)}}},Ve=k(Te,[["__scopeId","data-v-e1bddf55"]]);export{Ve as default};
